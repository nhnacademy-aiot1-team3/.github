# API

## Sensor API

DB에 저장되어 있는 데이터를 꺼내오고 이를 반환해주는 API, 차트 API에 연결 지어 데이터를 주고 받는다.

1. 가공된 데이터 조회

- Rule Engine에서 가공된 센서 데이터를 조회할 수 있어야 한다.
- 온도, 습도, CO2, 마그네틱 접점의 데이터를 조회할 수 있어야 한다.
- RDB에서 가져온 데이터를 JSON 형식으로 온다.
- 가공된 데이터 종류:
  - 7일간의 평균 값
  - 사용자 지정 시간의 평균 값
  - 예상 값

2. 실시간 데이터 조회

- 센서에서 수집한 데이터를 실시간으로 제공할 수 있어야 한다.
- 클라이언트가 요청할 때마다 가장 최근의 데이터를 반환해야 한다.

3. 센서 설정 저장

- 권한 있는 사용자가 선택할 수 있도록 옵션을 저장한다.
  - 센서 기능 타입, target value, 오차 범위, 시작 및 종료 날짜 시간을 지정할 수 있다.
- 적절한 데이터베이스를 사용하여 데이터를 관리해야 한다.

4. 센서 등록, 삭제, 수정 기능

- 조직의 오너가 센서의 정보를 등록, 삭제, 수정할 수 있어야 한다.

5. 전체 센서 및 종류별 센서 목록 조회

- 전체 센서 조회: 조직 내에 해당되는 센서들의 목록 조회 가능해야 한다.
- 종류별 센서 조회: 조직 내에 존재하는 센서들 중 조회하는 사용자가 선택한 종류에 해당되는 센서 목록을 표시해야 한다. 

6. 센서의 data 로그 관리 기능

- 센서와 관련된 모든 동작(센서 보내는 데이터, 센서 설정 변경)을 표시하고 이를 데이터베이스에 저장하고 관리한다.

7. 센서의 error 로그 관리 기능

- 센서가 작동하지 않거나 데이터 수집에 실패한 경우에 대비한 에러 내용을 로그에 표시한다.
- 사용자가 적절하게 처리할 수 있도록 자세한 오류 메시지를 표시한다.


## Chart API

1. 다양한 차트 유형 지원

- 선 그래프, 막대 그래프, 원형 그래프 등 다양한 차트 유형을 지원해야 한다.

2. 다중 데이터 시각화

- 여러 데이터 세트를 동시에 시각화할 수 있는 기능이 필요한다.
- 한 차트에 여러 데이터를 표시할 수 있어야 한다.

3. 인터랙티브 기능

- 사용자가 차트를 상호 작용할 수 있는 기능이 필요한다.
- 예를 들어, 차트 위에 마우스를 가져가면 해당 값이 표시되거나, 필터링 기능을 통해 특정 데이터를 숨기거나 표시할 수 있어야 한다.

4. 맞춤 설정 가능

- 차트의 스타일, 색상, 축 레이블 등을 사용자가 맞춤 설정할 수 있는 기능이 필요한다.

## Member 관리 API

1. 조직 생성, 삭제, 수정, 목록 조회 기능

 - 조직 생성, 삭제와 같은 조직 관리에 필요한 기능을 제공할 수 있어야 한다. 
 - 목록 종류는 승인 대기 목록, viewer 목록, 조직 목록이다.

2. 조직에 멤버 추가, 삭제 기능

 - 사용자에게 조직 추가, 삭제 기능을 제공할 수 있어야 한다.
    
3. 공지 사항 추가, 삭제, 수정 및 조회 기능
   
 - 관리자는 공지사항을 추가, 삭제 및 수정할 수 있어야 한다.
 - 모든 사용자에게 공지사항을 조회할 수 있도록 해야 한다.
 - 공지사항에 파일을 첨부할 수 있도록 해야 한다.
